<form id="cohort-form" class="multi-step-form" method="POST" action="{{ url_for('cohorts.create') }}" data-fetch-endpoint="/dashboard/cohorts/template">
    <!-- Step 1: Choose Template -->
    <div class="step-1">
        <h2>Select Template</h2>
        <div>
            <label for="template_id">Template:</label>
            <select name="template_id" id="template_id" data-fetch-trigger required>
                {% for template in templates %}
                <option value="{{ template.id }}">{{ template.default_name }}</option>
                {% endfor %}
            </select>
        </div>
        <button class="btn" type="button" data-step="next">Next</button>
    </div>

    <!-- Step 2: Fill Cohort Details -->
    <div class="step-2" style="display:none;">
        <h2>Add Cohort</h2>
        <!-- These fields will be pre-populated based on the fetched defaults -->
        <div>
            <label for="name">Name:</label>
            <input type="text" name="name" id="name" data-fetch-field="default_name" required>
        </div>
        <div>
            <label for="max_capacity">Max Capacity:</label>
            <input type="number" name="max_capacity" id="max_capacity" value="10" min="1" required data-fetch-field="default_max_capacity">
        </div>
        <div>
            <label for="description">Description:</label>
            <textarea name="description" id="description"></textarea>
        </div>
        <div class="d-flex justify-content-between gap-1">
            <div>
                <label for="start_date">Start Date:</label>
                <input type="date" name="start_date" id="start_date" required>
            </div>
            <div>
                <label for="number_of_days">Number of Days:</label>
                <input type="number" name="number_of_days" id="number_of_days" value="1" min="1" required data-fetch-field="default_number_of_days">
            </div>
        </div>
        <div>
            <label for="location_id">Location:</label>
            <select name="location_id" id="location_id" required>
                {% for location in locations %}
                <option value="{{ location.id }}">{{ location.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label for="team_id">Team:</label>
            <select name="team_id" id="team_id" required>
                {% for team in teams %}
                <option value="{{ team.id }}">{{ team.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button class="btn" type="button" data-step="back">Back</button>
        <button class="btn" type="submit">Create Cohort</button>
    </div>
</form>

<!-- Include the generic multi-step form JavaScript file -->
<script src="{{ url_for('static', filename='js/multi_step_form.js') }}"></script>
